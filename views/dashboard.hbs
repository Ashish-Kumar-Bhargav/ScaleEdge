<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://kit.fontawesome.com/yourcode.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/stylesheets/dashboard.css" />
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/sweetalert/dist/sweetalert.css">
</head>

<body>
    <div class="sidebar">
        <div class="logo-details">
            <i class="fa-solid fa-s fa-spin"></i>
            <span class="logo_name">ScaleEdge</span>
        </div>
        <ul class="nav-links">
            <li>
                <a href="#" class="active">
                    <i class='bx bx-grid-alt'></i>
                    <span class="links_name">Dashboard</span>
                </a>
            </li>
            <li>
                <a href="#">
                    <i class="fa-solid fa-house"></i>
                    <span class="links_name">Home</span>
                </a>
            </li>
            <li>
                <a href="#">
                    <i class="fa-solid fa-user"></i>
                    <span class="links_name">User Management</span>
                </a>
            </li>
            <li>
                <a href="#">
                    <i class="fa-solid fa-pencil"></i>
                    <span class="links_name">Lead Management</span>
                </a>
            </li>
            <li>
                <a href="#">
                    <i class="fa-solid fa-gear"></i>
                    <span class="links_name">Setting</span>
                </a>
            </li>
            <li>
                <a href="#">
                    <i class="fa-solid fa-right-from-bracket"></i>
                    <span class="links_name">Log Out</span>
                </a>
            </li>
        </ul>
    </div>
    <section class="home-section">
        <nav>
            <div class="sidebar-button">
                <i class='bx bx-menu sidebarBtn'></i>
                <span class="dashboard">Dashboard</span>
            </div>
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="Search...">
                <i class='bx bx-search'></i>
            </div>
            <div class="profile-details">
                <i class="fa-solid fa-bell"></i>
            </div>
        </nav>

        <div class="home-content">
            <div class="title">
                <span class="text">Product Sub Category list <p>View/Search product Category</p></span>
                <a href="/add/{{this.id}}">
                    <span class="Add-btn"><i class="fa-sharp fa-solid fa-plus"></i>Add User</span>
                </a>
            </div>

            <div class="sales-boxes">
                <div class="recent-sales box">
                    <div class="search">
                        <a href="" class="colon-2"><img
                                src="https://dreamspos.dreamguystech.com/html/template/assets/img/icons/filter.svg"
                                alt="" srcset=""></a>
                        <i class='bx bx-search bx-1'></i>
                        <input type="text" id="searchInput1" placeholder="Search...">
                    </div>

                    <div class="sales-details">
                        <table id="userDataTable" class="table table-bordered">
                            <thead class="thead-dark">
                                <tr>
                                    <th><input type="checkbox" id="selectAll"></th>
                                    <th scope="col">Id<i class="fa-solid fa-sort sort"></i></th>
                                    <th scope="col">Name<i class="fa-solid fa-sort sort"></i></th>
                                    <th scope="col">Email<i class="fa-solid fa-sort sort"></i></th>
                                    <th scope="col">Phone<i class="fa-solid fa-sort sort"></i></th>
                                    <th scope="col">Group<i class="fa-solid fa-sort sort"></i></th>
                                    <th scope="col" class="text-end">Action <i class="fa-solid fa-sort sort"></i></th>
                                </tr>
                            </thead>
                            <tbody>
                                {{#each rows}}
                                <tr>
                                    <td><input type="checkbox" class="checkbox"></td>
                                    <td scope="row">{{this.id}}</td>
                                    <td>{{this.user_id}}</td>
                                    <td>{{this.email}}</td>
                                    <td>{{this.mobile}}</td>
                                    <td>{{this.user_group}}</td>
                                    <td class="text-end">
                                        <a href="/edit" type="button" class="btn btn-light btn-small"
                                            style="text-decoration: none; color:black;">
                                            <i class="fa-sharp fa-solid fa-pencil"></i>
                                        </a>
                                        <a href="#" onclick="deleteUser('{{this.id}}')" type="button"
                                            class="btn btn-light btn-small">
                                            <i class="fa-solid fa-trash red"></i>
                                        </a>
                                    </td>
                                </tr>
                                {{/each}}
                            </tbody>
                        </table>
                    </div>
                    <div class="line">
                        <p>Show per page</p>
                        <select class="same">
                            <option value="Admin">10</option>
                            <option value="User">25</option>
                            <option value="User">50</option>
                            <option value="User">100</option>
                        </select>
                        <div class="button">
                            <p>1 - 10 of 17 items</p>
                            <a href="#" class="colon-1">1</a>
                            <a href="" class="colon">2</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="spin">
            <i class="fa-solid fa-gear fa-spin mdi-spin"></i>
        </div>
    </section>
</body>

</html>

<script>
    let sidebar = document.querySelector(".sidebar");
    let sidebarBtn = document.querySelector(".sidebarBtn");
    const body = document.querySelector("body"),
        modeToggle = body.querySelector(".mode-toggle");
    sidebarBtn.onclick = function () {
        sidebar.classList.toggle("active");
        if (sidebar.classList.contains("active")) {
            sidebarBtn.classList.replace("bx-menu", "bx-menu-alt-right");
        } else
            sidebarBtn.classList.replace("bx-menu-alt-right", "bx-menu");
    }

    const selectAll = document.getElementById('selectAll');
    const checkboxes = document.querySelectorAll('.checkbox');

    selectAll.addEventListener('change', function () {
        checkboxes.forEach(checkbox => {
            checkbox.checked = selectAll.checked;
        });
    });

    checkboxes.forEach(checkbox => {
        checkbox.addEventListener('change', function () {
            if (!this.checked) {
                selectAll.checked = false;
            } else {
                let allChecked = true;
                checkboxes.forEach(check => {
                    if (!check.checked) {
                        allChecked = false;
                    }
                });
                if (allChecked) {
                    selectAll.checked = true;
                }
            }
        });
    });

    function deleteUser(userId) {
        swal({
            title: "Are you sure?",
            text: "Once deleted, you will not be able to recover this user!",
            icon: "warning",
            buttons: ["Cancel", "Delete"],
            dangerMode: true,
        }).then((willDelete) => {
            if (willDelete) {
                window.location.href = "/delete/" + userId;
            }
        });
    }

    const searchInput = document.getElementById('searchInput');
    searchInput.addEventListener('input', function () {
        const searchTerm = searchInput.value.trim().toLowerCase();
        const rows = document.querySelectorAll('#userDataTable tbody tr');
        rows.forEach(row => {
            const nameCell = row.querySelector('td:nth-child(3)');
            const emailCell = row.querySelector('td:nth-child(4)');
            const mobileCell = row.querySelector('td:nth-child(5)');
            const userGroupCell = row.querySelector('td:nth-child(6)');

            const name = nameCell.textContent.trim().toLowerCase();
            const email = emailCell.textContent.trim().toLowerCase();
            const mobile = mobileCell.textContent.trim().toLowerCase();
            const userGroup = userGroupCell.textContent.trim().toLowerCase();

            if (
                name.includes(searchTerm) ||
                email.includes(searchTerm) ||
                mobile.includes(searchTerm) ||
                userGroup.includes(searchTerm)
            ) {
                row.style.display = '';
            } else {
                row.style.display = 'none';
            }
        });
    });



    const searchInput1 = document.getElementById('searchInput1');
    searchInput1.addEventListener('input', function () {
        const searchTerm = searchInput1.value.trim().toLowerCase();
        const rows = document.querySelectorAll('#userDataTable tbody tr');
        rows.forEach(row => {
            const nameCell = row.querySelector('td:nth-child(3)');
            const emailCell = row.querySelector('td:nth-child(4)');
            const mobileCell = row.querySelector('td:nth-child(5)');
            const userGroupCell = row.querySelector('td:nth-child(6)');

            const name = nameCell.textContent.trim().toLowerCase();
            const email = emailCell.textContent.trim().toLowerCase();
            const mobile = mobileCell.textContent.trim().toLowerCase();
            const userGroup = userGroupCell.textContent.trim().toLowerCase();

            if (
                name.includes(searchTerm) ||
                email.includes(searchTerm) ||
                mobile.includes(searchTerm) ||
                userGroup.includes(searchTerm)
            ) {
                row.style.display = '';
            } else {
                row.style.display = 'none';
            }
        });
    });

</script>